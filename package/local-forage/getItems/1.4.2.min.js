!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("localforage")):"function"==typeof define&&define.amd?define(["exports","localforage"],t):t(e.localforageGetItems=e.localforageGetItems||{},e.localforage)}(this,function(e,t){"use strict";function n(e){return n.result?n.result:e&&"function"==typeof e.getSerializer?n.result=e.getSerializer():Promise.reject(new Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function i(e,t){return t&&e.then(function(e){t(null,e)},function(e){t(e)}),e}function u(t,e){var n=this.getItem(t).then(function(e){return{key:t,value:e}});return i(n,e),n}function a(o){var a=this;return new Promise(function(i,e){for(var t=[],n=0,r=o.length;n<r;n++)t.push(u.call(a,o[n]));Promise.all(t).then(function(e){for(var t={},n=0,r=e.length;n<r;n++){var o=e[n];t[o.key]=o.value}i(t)}).catch(e)})}t="default"in t?t.default:t;var d="undefined"!=typeof IDBKeyRange?IDBKeyRange:"undefined"!=typeof webkitIDBKeyRange?webkitIDBKeyRange:"undefined"!=typeof mozIDBKeyRange?mozIDBKeyRange:void 0;function f(l){l=l.slice();var c=this;function s(e,t){return e<t?-1:t<e?1:0}return new Promise(function(u,f){c.ready().then(function(){var e=c._dbInfo,t=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),r=l.sort(s),n=d.bound(l[0],l[l.length-1],!1,!1),o=t.openCursor(n),i={},a=0;o.onsuccess=function(){var e=o.result;if(e){for(var t=e.key;t>r[a];)if(++a===r.length)return void u(i);if(t===r[a]){var n=e.value;void 0===n&&(n=null),i[t]=n,e.continue()}else e.continue(r[a])}else u(i)},o.onerror=function(){f(o.error)}}).catch(f)})}function l(a){var e=this;return new Promise(function(l,i){e.ready().then(function(){return n(e)}).then(function(f){var o=e._dbInfo;o.db.transaction(function(e){for(var t=new Array(a.length),n=0,r=a.length;n<r;n++)t[n]="?";e.executeSql("SELECT * FROM "+o.storeName+" WHERE (key IN ("+t.join(",")+"))",a,function(e,t){for(var n={},r=t.rows,o=0,i=r.length;o<i;o++){var a=r.item(o),u=a.value;u&&(u=f.deserialize(u)),n[a.key]=u}l(n)},function(e,t){i(t)})})}).catch(i)})}function r(e,t){var n,r=this;if(arguments.length&&null!==e){var o=r.driver();n=o===r.INDEXEDDB?f.apply(r,arguments):o===r.WEBSQL?l.apply(r,arguments):a.apply(r,arguments)}else n=function(){var n={};return this.iterate(function(e,t){n[t]=e}).then(function(){return n})}.apply(r);return i(n,t),n}function o(e){var t=Object.getPrototypeOf(e);t&&(t.getItems=r,t.getItems.indexedDB=function(){return f.apply(this,arguments)},t.getItems.websql=function(){return l.apply(this,arguments)},t.getItems.generic=function(){return a.apply(this,arguments)})}var c=o(t);e.localforageGetItems=r,e.extendPrototype=o,e.extendPrototypeResult=c,e.getItemsGeneric=a,Object.defineProperty(e,"__esModule",{value:!0})});